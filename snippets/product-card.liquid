{% comment %}
  Luvia Era Product Cart Snippet
  Usage {% render 'product-card', product: product %}
{% endcomment %}

<div class="group flex flex-col h-full bg-white overflow-hidden relative">
  <div class="relative aspect-[3/4] overflow-hidden bg-custombg">
    {% if product.compare_at_price > product.price %}
      <span class="absolute top-3 left-3 z-10 bg-secondary text-white font-light text-[12px] px-2 py-1 tracking-widest uppercase">
        {{ 'products.product.on_sale' | t }}
      </span>
    {% endif %}

    <div class="absolute top-3 right-3 z-40">
      <button
        type="button"
        class="custom-wishlist-btn flex items-center justify-center w-9 h-9 bg-[#ffffffc2] rounded-full shadow-sm hover:scale-110 transition-all duration-300 pointer-events-auto cursor-pointer"
        data-id="{{ product.id }}"
        aria-label="Add to wishlist"
      >
        <svg
          class="w-5 h-5 text-primary transition-colors pointer-events-none"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
        </svg>
      </button>
    </div>

    <a href="{{ product.url }}" class="block h-full w-full z-10">
      <img
        src="{{ product.featured_image | image_url: width: 600 }}"
        alt="{{ product.title }}"
        loading="lazy"
        width="600"
        height="800"
        class="w-full h-full object-cover transition-opacity duration-700 {% if product.images[1] %}group-hover:opacity-0{% endif %}"
      >

      {% if product.images[1] %}
        <img
          src="{{ product.images[1] | image_url: width: 600 }}"
          alt="{{ product.title }}"
          loading="lazy"
          width="600"
          height="800"
          class="w-full h-full object-cover absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700"
        >
      {% endif %}
    </a>

    <div class="absolute inset-x-0 bottom-0 translate-y-full group-hover:translate-y-0 transition-transform duration-300 hidden md:block z-30">
      {%- assign product_form_id = 'quick-add-' | append: section.id | append: '-' | append: product.id -%}

      {% form 'product', product, id: product_form_id, class: 'm-0' %}
        <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
        <input type="hidden" name="quantity" value="1">

        <button
          type="submit"
          name="add"
          class="w-full bg-primary text-white py-3 text-[13px] uppercase tracking-[0.2em] block text-center hover:bg-secondary transition-colors cursor-pointer"
          {% unless product.available %}
            disabled
          {% endunless %}
        >
          {% if product.available %}
            {{ 'products.product.add_to_cart' | t }}
          {% else %}
            {{ 'products.product.sold_out' | t }}
          {% endif %}
        </button>
      {% endform %}
    </div>
  </div>

  <div class="pt-4 pb-2 flex flex-col items-center px-3">
    <a
      href="{{ product.url }}"
      class="text-primary font-light text-[14px] hover:text-secondary transition-colors uppercase text-center"
    >
      {{ product.title }}
    </a>

    <div class="mt-2 flex items-center gap-2">
      {% if product.compare_at_price > product.price %}
        <span class="text-gray-400 line-through text-[13px]">{{ product.compare_at_price | money }}</span>
        <span class="text-primary text-[14px] font-medium">{{ product.price | money }}</span>
      {% else %}
        <span class="text-primary text-[14px] font-medium">{{ product.price | money }}</span>
      {% endif %}
    </div>
  </div>
</div>
